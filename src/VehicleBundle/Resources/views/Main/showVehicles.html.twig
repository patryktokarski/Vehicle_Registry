{% extends 'base.html.twig' %}



{% block title %}{{ cars|length}} results found. These vehicles match the search criteria{% endblock %}
{% block desc %}
    {% set totalResultCons = 0 %}
    {% for one in carsTotalAvg %}
        {% set totalResultCons = totalResultCons + one %}
    {% endfor %}
    <ul>
        {% for br in brand %}<li>Brand: {{ br.name }}</li>{% endfor %}
        {% if model != null %}{% for ml in model %}<li>Model: {{ ml.name }}</li>{% endfor %}{% endif %}
        <li>Averange fuel consumption for found results:{% if (carsTotalAvg|length) != 0 %}{{ (totalResultCons/(carsTotalAvg|length))|number_format(2, '.')}}{% else %}0{% endif %}</li>
    </ul>
{% endblock desc %}
{% block body %}
    <table class="table">
        <thead>
            <tr>
                <th>Brand</th>
                <th>Model</th>
                <th>User</th>
                <th>Averange Fuel Consumption [l/100km]</th>
            </tr>
        </thead>
        <tbody>
        {% for car in cars %}
            <tr>
                <td><a href="{{ path('show_vehicle_repo', { 'id': car.id }) }}">{{ car.brand.name }}</a></td>
                <td>{{ car.model.name }}</td>
                <td>{{ car.user.username }}</td>
                <td>
                {{carsTotalAvg[loop.index-1]}}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
        
{% endblock body %}       

